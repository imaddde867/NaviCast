flowchart TB
    A[AIS API] -->|Python Requests| B[Python Data Collector script]
    B -->|Raw Data| C[(Raw Data Storage)]
    C -->|Batch Processing| D[Data Processing & Enrichment<br/>ML]
    D -->|Enriched Data| E[(PostgreSQL Database)]
    E -->|Query Results| F[Flask API]
    F -->|JSON| G[Folium Map]

    %% Add explanatory notes
    subgraph Data Pipeline
        B
        C
        D
        E
    end

    %% Styling
    classDef primary fill:#93c5fd,stroke:#60a5fa,stroke-width:2px,color:#1e3a8a
    classDef storage fill:#86efac,stroke:#4ade80,stroke-width:2px,color:#065f46
    classDef api fill:#c4b5fd,stroke:#a78bfa,stroke-width:2px,color:#4c1d95
    class B,D primary
    class C,E storage
    class F api